# è¯­æ³•æ£€æŸ¥æŒ‡å—

## æ¦‚è¿°

é¡¹ç›®åŒ…å«è‡ªåŠ¨åŒ–çš„ JavaScript è¯­æ³•æ£€æŸ¥å·¥å…·ï¼Œç”¨äºŽåœ¨æäº¤å‰æ£€æµ‹è¯­æ³•é”™è¯¯ã€‚

## ä½¿ç”¨æ–¹æ³•

### 1. å‘½ä»¤è¡Œæ£€æŸ¥

```bash
# æ£€æŸ¥æ‰€æœ‰ JavaScript æ–‡ä»¶
npm run lint:syntax

# æˆ–è€…
node scripts/lint-syntax.js
```

### 2. Git æäº¤å‰è‡ªåŠ¨æ£€æŸ¥

é¡¹ç›®é…ç½®äº† Git pre-commit hookï¼Œæ¯æ¬¡ `git commit` æ—¶ä¼šè‡ªåŠ¨è¿è¡Œè¯­æ³•æ£€æŸ¥ï¼š

```bash
git commit -m "fix: some fix"
# è‡ªåŠ¨è¿è¡Œè¯­æ³•æ£€æŸ¥
# å¦‚æžœæ£€æŸ¥é€šè¿‡ï¼Œæäº¤æˆåŠŸ
# å¦‚æžœæ£€æŸ¥å¤±è´¥ï¼Œæäº¤è¢«é˜»æ­¢
```

### 3. è·³è¿‡è¯­æ³•æ£€æŸ¥ï¼ˆä¸æŽ¨èï¼‰

å¦‚æžœç¡®å®žéœ€è¦è·³è¿‡è¯­æ³•æ£€æŸ¥ï¼ˆç´§æ€¥æƒ…å†µï¼‰ï¼š

```bash
git commit --no-verify -m "urgent fix"
```

âš ï¸ **æ³¨æ„**: è·³è¿‡æ£€æŸ¥å¯èƒ½å¯¼è‡´è¯­æ³•é”™è¯¯è¢«æäº¤ã€‚

## æ£€æŸ¥èŒƒå›´

è¯­æ³•æ£€æŸ¥ä¼šæ‰«æä»¥ä¸‹ç›®å½•ä¸­çš„æ‰€æœ‰ `.js` æ–‡ä»¶ï¼š

- `js/` - ä¸»è¦ JavaScript æºä»£ç 
- `tests/` - Playwright æµ‹è¯•æ–‡ä»¶
- `scripts/` - å·¥å…·å’Œè„šæœ¬æ–‡ä»¶

è‡ªåŠ¨å¿½ç•¥çš„ç›®å½•ï¼š

- `node_modules/`
- `playwright-report/`
- `target/`
- `pkg/`

## è¾“å‡ºç¤ºä¾‹

### æˆåŠŸ

```
ðŸ” å¼€å§‹è¯­æ³•æ£€æŸ¥...

æ‰¾åˆ° 17 ä¸ªæ–‡ä»¶éœ€è¦æ£€æŸ¥

âœ… js\bootstrap.js
âœ… js\game.js
âœ… js\i18n.js
...

==================================================
æ£€æŸ¥ç»“æžœï¼š17 ä¸ªæ–‡ä»¶ï¼Œ0 ä¸ªé”™è¯¯
==================================================

âœ… æ‰€æœ‰æ–‡ä»¶è¯­æ³•æ­£ç¡®ï¼
```

### å¤±è´¥

```
ðŸ” å¼€å§‹è¯­æ³•æ£€æŸ¥...

æ‰¾åˆ° 17 ä¸ªæ–‡ä»¶éœ€è¦æ£€æŸ¥

âœ… js\bootstrap.js
âŒ js\game.js
   SyntaxError: unexpected token: ')'
...

==================================================
æ£€æŸ¥ç»“æžœï¼š17 ä¸ªæ–‡ä»¶ï¼Œ1 ä¸ªé”™è¯¯
==================================================

âŒ è¯­æ³•æ£€æŸ¥å¤±è´¥ï¼è¯·ä¿®å¤ä¸Šè¿°é”™è¯¯ã€‚
```

## ä¿®å¤è¯­æ³•é”™è¯¯

1. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯ï¼Œæ‰¾åˆ°å‡ºé”™çš„æ–‡ä»¶å’Œè¡Œå·
2. ä½¿ç”¨ç¼–è¾‘å™¨æ‰“å¼€æ–‡ä»¶
3. ä¿®å¤è¯­æ³•é”™è¯¯
4. é‡æ–°è¿è¡Œ `npm run lint:syntax` éªŒè¯
5. å†æ¬¡å°è¯•æäº¤

## é›†æˆåˆ° CI/CD

åœ¨ CI/CD æµç¨‹ä¸­æ·»åŠ è¯­æ³•æ£€æŸ¥æ­¥éª¤ï¼š

```yaml
# GitHub Actions ç¤ºä¾‹
- name: Check JavaScript syntax
  run: npm run lint:syntax
```

## ç›¸å…³æ–‡ä»¶

- `scripts/lint-syntax.js` - è¯­æ³•æ£€æŸ¥è„šæœ¬
- `tests/syntax-check.test.js` - Playwright è¯­æ³•æ£€æŸ¥æµ‹è¯•
- `.git/hooks/pre-commit` - Git pre-commit hook
- `package.json` - NPM è„šæœ¬é…ç½®

## æœ€ä½³å®žè·µ

1. **æ¯æ¬¡æäº¤å‰è¿è¡Œ**: ä½¿ç”¨ `npm run lint:syntax` æˆ–ä¾èµ– pre-commit hook
2. **IDE é›†æˆ**: é…ç½® IDE åœ¨ä¿å­˜æ—¶æ£€æŸ¥è¯­æ³•
3. **å¿«é€Ÿä¿®å¤**: å‘çŽ°é”™è¯¯ç«‹å³ä¿®å¤ï¼Œä¸è¦ç´¯ç§¯
4. **ä»£ç å®¡æŸ¥**: åœ¨ PR ä¸­ç¡®è®¤è¯­æ³•æ£€æŸ¥é€šè¿‡

## æ•…éšœæŽ’é™¤

### Pre-commit hook ä¸å·¥ä½œ

ç¡®ä¿ hook æ–‡ä»¶æœ‰æ‰§è¡Œæƒé™ï¼š

```bash
chmod +x .git/hooks/pre-commit
```

### æ£€æŸ¥è„šæœ¬æ‰¾ä¸åˆ°æ–‡ä»¶

ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œå‘½ä»¤ï¼š

```bash
cd /path/to/idle-game
npm run lint:syntax
```

### Node.js ç‰ˆæœ¬é—®é¢˜

ç¡®ä¿ä½¿ç”¨ Node.js 14 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼š

```bash
node --version  # åº”è¯¥ >= v14.0.0
```
